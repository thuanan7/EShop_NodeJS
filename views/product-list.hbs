<!-- Breadcrumb Start -->
<div class="breadcrumb-wrap">
  <div class="container">
    <ul class="breadcrumb">
      <li class="breadcrumb-item"><a href="#">Home</a></li>
      <li class="breadcrumb-item"><a href="#">Products</a></li>
      <li class="breadcrumb-item active">product list</li>
    </ul>
  </div>
</div>
<!-- Breadcrumb End -->

<!-- Product List Start -->
<div class="product-view">
  <div class="container">
    <div class="row">
      <div class="col-md-9">
        <div class="row">
          <div class="col-lg-12">
            <div class="row">
              <div class="col-md-8">
                <div class="product-search">
                  <form action="/products" method ="get">
                  <input type="text" name="keyword" placeholder="Search" />
                  <button><i class="fa fa-search"></i></button>
                  </form>
                </div>
              </div>
              <div class="col-md-4">
                <div class="product-short">
                  <div class="dropdown">
                    <a
                      href="#"
                      class="dropdown-toggle"
                      data-toggle="dropdown"
                    >Product sort by {{_sort}}</a>
                    <div class="dropdown-menu dropdown-menu-right">
                      <a href="#" class="dropdown-item">Price</a>
                      <a href="#" class="dropdown-item">Newest</a>
                      <a href="#" class="dropdown-item">Popular</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          {{#each products}}
          <div class="col-lg-4">
            {{>product}}
          </div>
          {{/each}}
        </div>

        <div class="col-lg-12">
          <nav aria-label="Page navigation example">
            {{{paginateHelper pagination}}}
          </nav>
          <nav aria-label="Page navigation example">
            <ul class="pagination justify-content-center">
              <li class="page-item disabled">
                <a class="page-link" href="#" tabindex="-1">Previous</a>
              </li>
              <li class="page-item active"><a
                  class="page-link"
                  href="#"
                >1</a></li>
              <li class="page-item"><a class="page-link" href="#">2</a></li>
              <li class="page-item"><a class="page-link" href="#">3</a></li>
              <li class="page-item">
                <a class="page-link" href="#">Next</a>
              </li>
            </ul>
          </nav>
        </div>
      </div>

      {{> right-column }}
    </div>
  </div>
</div>
<!-- Product List End -->

<script>
  function updateSortParams(sortValue) {
    const currentUrl = new URL(window.location.href);
    currentUrl.searchParams.set('_sort', sortValue);
    window.location.href = currentUrl.toString();
  }

  const sortButtons = document.getElementsByClassName("dropdown-item");
  for (let i = 0; i < sortButtons.length; i++) {
    sortButtons[i].addEventListener("click", (event) => {
      event.preventDefault();
      updateSortParams(sortButtons[i].innerText.toLowerCase());
    });
  }
</script>